# CMDB系统 TODO

## 数据库模型和数据持久化
- [ ] 创建用户表模型
- [ ] 创建角色表模型
- [ ] 创建权限表模型
- [ ] 创建权限组表模型
- [ ] 创建用户-角色关联表
- [ ] 创建角色-权限关联表
- [ ] 创建权限组-资源关联表
- [ ] 实现数据库查询辅助函数
- [ ] 实现tRPC API路由
- [ ] 集成WebSocket实时推送
- [ ] 更新前端页面使用新API

## UI优化和移动端支持
- [x] 重新设计权限管理页面展示关联关系
- [ ] 优化用户管理页面展示用户关联
- [x] 添加移动端响应式布局
- [x] 优化导航栏移动端显示
- [ ] 优化表格移动端显示

## 权限管理优化
- [x] 权限分配改为多选列表+Tag形式
- [x] Mock数据实时更新支持
- [x] 修复移动端权限列表卡片变形
- [x] 完善权限列表详细信息展示
- [ ] 添加预设权限模板

## 权限完善
- [x] 添加完整的CRUD权限（创建、读取、更新、删除）
- [x] 为每个资源类型添加完整权限集

## 权限组功能完善
- [x] 添加权限组用户管理（添加/移除用户）
- [x] 添加权限组资源管理（添加/移除资源）
- [x] 弹窗改为移动端抽屉式风格
- [x] 优化权限组详情展示

## 方案B权限组资源管理实现
- [x] 优化PC端布局，增加内容区域宽度
- [x] 添加用户选择列表（替代手动输入ID）
- [x] 添加资源选择列表（替代手动输入ID）
- [ ] 实现权限组资源创建逻辑（普通用户必须选择权限组）
- [ ] 实现资源访问权限检查（管理员访问所有，普通用户访问权限组资源）
- [ ] 更新资源列表显示逻辑

## 抽屉弹窗优化
- [x] 修复抽屉弹窗默认高度过小的问题
- [x] 优化抽屉弹窗在PC端的显示效果

## 权限分配优化
- [x] 显示已分配的权限（Tag标签形式）
- [x] 改为输入框+下拉选择（带模糊搜索）
- [x] 已分配权限在下拉列表中高亮显示
- [x] 支持点击Tag删除已分配的权限

## Bug修复
- [x] 修复权限管理页面roles.map错误（数据格式问题）

## 权限分配UI优化
- [x] 实现Ant Design风格的多选输入框（输入框内显示Tag标签）
- [x] 点击输入框弹出下拉列表
- [x] 支持搜索过滤权限
- [x] 点击Tag的X删除已选权限

## 多选下拉组件实现
- [x] 创建多选下拉组件（输入框内显示Tag标签）
- [x] 点击输入框弹出带复选框的下拉面板
- [x] 支持搜索过滤下拉列表
- [x] 修复添加权限功能（点击复选框添加权限）

## 多选下拉组件Bug修复
- [x] 修复无法选中权限的问题（mockData返回数据格式不一致）
- [x] 修复无法添加权限到角色的问题
- [x] 检查API调用和事件处理逻辑

## 创建权限表单优化
- [x] 将资源类型和操作类型合并到同一行
- [x] 固定选择框宽度提升美观度

## 权限组添加用户功能优化
- [x] 为权限组添加用户功能使用多选下拉组件
- [x] 保持权限组卡片样式不变
- [x] 添加removeUserFromGroup API方法

## 权限组批量操作功能
- [x] 添加“批量操作”按钮到权限组卡片
- [x] 实现从其他权限组复制资源功能
- [x] 实现按资源类型批量添加功能
- [x] 实现资源迁移功能（复制+删除）
- [x] 实现批量移除资源功能
- [x] 添加批量操作相关API方法

## 添加资源界面优化
- [x] 将资源类型和选择框合并到同一行
- [x] 固定选择框宽度
- [x] 将资源列表从卡片式改为表格式
- [x] 添加分页功能
